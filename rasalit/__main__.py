import subprocess
import typer
from rasalit import __version__
from rasalit.common import run_streamlit_app, app_path


app = typer.Typer(add_completion=False)


@app.command()
def overview(port: int = typer.Option(8501, help=("Port number"))):
    """Gives an overview of all results generated by `rasa train nlu`."""
    run_streamlit_app("overview", port=port)


@app.command()
def diet_explorer(port: int = typer.Option(8501, help=("Port number"))):
    """Allows you to explore the DIET settings."""
    app = app_path("html/diet")
    typer.echo(typer.style(f"Starting up {app}", fg="green"))
    subprocess.run(["python", "-m", "http.server", str(port), "--directory", app])


@app.command()
def version():
    """Prints the current version"""
    print(f"{__version__}")


if __name__ == "__main__":
    app()
