import pathlib
import subprocess

import click


def app_path(py_file):
    return str(pathlib.Path(__file__).parent.absolute() / py_file)

@click.group()
def main():
    """Helper Views for Rasa NLU"""
    pass


@click.command()
def overview():
    """Gives an overview of all results generated by `rasa train`."""
    app = app_path("viewresults.py")
    click.echo(click.style(f'Starting up {app}', fg='green'))
    subprocess.run(["streamlit", "run", app])


@click.command()
def diet_explorer():
    """Allows you to explore the DIET settings."""
    app = app_path("html/diet")
    click.echo(click.style(f'Starting up {app}', fg='green'))
    subprocess.run(["python", "-m", "http.server", "54321", "--directory", app])


main.add_command(overview)
main.add_command(diet_explorer)


if __name__ == "__main__":
    main()
